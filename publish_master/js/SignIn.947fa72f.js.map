{"version":3,"sources":["webpack:///./src/views/common/SignIn.vue","webpack:///./src/hooks/useJumpBtn.ts","webpack:///./src/views/common/SignIn.vue?46e8","webpack:///./src/views/common/SignIn.vue?9b74","webpack:///./src/views/common/SignIn.vue?4b28"],"names":["class","square","type","style","onClickBtn","router","plain","showPage","handleClickJumpBtn","path","push","defineComponent","name","setup","useRouter","ref","Dialog","confirm","title","message","closeOnClickOverlay","confirmButtonText","then","catch","onMounted","http","get","res","code","data","hasMsg","store","commit","role","register","needComplete","sessionStorage","setItem","value","Toast","fail","msg","err","console","log","render","__scopeId"],"mappings":"8MACOA,MAAM,sB,iXAYJA,MAAM,O,iBAMN,S,iBAQA,S,2HA1BP,eA6BM,MA7BN,EA6BM,CA5BJ,EAWA,eAgBM,MAhBN,EAgBM,CAfJ,eAMC,GALCC,OAAA,GACAC,KAAK,UACLC,MAAA,eACC,QAAK,+BAAE,EAAAC,WAAW,EAAAC,OAAM,uB,YACxB,iBAAK,C,YAER,eAOC,GANCJ,OAAA,GACAK,MAAA,GACAJ,KAAK,UACLC,MAAA,eACC,QAAK,+BAAE,EAAAC,WAAW,EAAAC,OAAM,qB,YACxB,iBAAK,C,8BA1B4B,EAAAE,eCD7BC,EAAqB,SAACH,EAAQI,GACvCJ,EAAOK,KAAKD,I,oFCQDE,iBAAgB,CAC3BC,KAAM,SACNC,MAF2B,WAGvB,IAAMR,EAASS,iBACTP,EAAWQ,gBAAI,GACfX,EAAa,SAACC,EAAQI,GACX,qBAATA,EACAO,OAAOC,QAAQ,CACXC,MAAO,KACPC,QAAS,iDACTC,qBAAqB,EACrBC,kBAAmB,QAElBC,MAAK,eAGLC,OAAM,eAKXf,EAAmBH,EAAQI,IA+CnC,OA5CAe,gBAAU,WACNC,OACKC,IAAI,sBAAuB,IAC3BJ,MAAK,SAACK,GACP,GAAiB,QAAbA,EAAIC,KAAgB,CAChBD,EAAIE,KAAKC,OACTC,OAAMC,OAAO,aAAa,GAG1BD,OAAMC,OAAO,aAAa,GAE9B,IAAMC,EAAON,EAAIE,KAAKI,KACtB,GAAY,GAARA,EAAW,CACX,IAAMC,EAAWP,EAAIE,KAAKK,WAAY,EAClCA,EACA7B,EAAOK,KAAK,sBAGZL,EAAOK,KAAK,yBAGf,GAAY,GAARuB,EAAW,CAChB,IAAME,EAAeR,EAAIE,KAAKM,aAC9BJ,OAAMC,OAAO,kBAAmBG,GAC5BA,EACAC,eAAeC,QAAQ,eAAgB,KAGvCD,eAAeC,QAAQ,eAAgB,KAE3ChC,EAAOK,KAAK,uBAGZH,EAAS+B,OAAQ,OAIrBC,OAAMC,KAAKb,EAAIc,QAGlBlB,OAAM,SAACmB,GACRC,QAAQC,IAAIF,SAGb,CACHrC,SACAE,WACAH,iB,UC3EZ,EAAOyC,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,2DCRf","file":"js/SignIn.947fa72f.js","sourcesContent":["<template>\r\n  <div class=\"sign-in-containner\" v-show=\"showPage\">\r\n    <div class=\"icon\">\r\n      <img\r\n        src=\"https://qrmkt.oss-cn-beijing.aliyuncs.com/hbseller_client/sign-in-icon.png\"\r\n        alt=\"\"\r\n      />\r\n    </div>\r\n    <p class=\"title\">欢迎来到“私域全生态平台”</p>\r\n    <p class=\"tips\">如果您是零售户，这将是您维系粉丝的最佳工具；</p>\r\n    <p class=\"tips\" style=\"margin-bottom:4rem\">\r\n      如果您是消费者，这里有最好玩的专享活动。\r\n    </p>\r\n    <div class=\"bar\">\r\n      <van-button\r\n        square\r\n        type=\"primary\"\r\n        style=\"width:8rem\"\r\n        @click=\"onClickBtn(router, '/seller/register')\"\r\n        >我是零售户</van-button\r\n      >\r\n      <van-button\r\n        square\r\n        plain\r\n        type=\"primary\"\r\n        style=\"width:8rem\"\r\n        @click=\"onClickBtn(router, '/customer/home')\"\r\n        >我是消费者</van-button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, onMounted, ref } from 'vue'\r\nimport { handleClickJumpBtn } from '@/hooks/useJumpBtn'\r\nimport { http } from '@/http'\r\nimport { Dialog, Toast } from 'vant'\r\nimport { Router, useRouter } from 'vue-router'\r\nimport store from '@/store'\r\n\r\nexport default defineComponent({\r\n  name: 'SignIn',\r\n  setup() {\r\n    const router = useRouter()\r\n    const showPage = ref(false)\r\n    const onClickBtn = (router: Router, path: string) => {\r\n      if (path === '/seller/register') {\r\n        Dialog.confirm({\r\n          title: '提示',\r\n          message:\r\n            '尊敬的店主，您还未注册成为平台的入驻零售户，请您联系当地的钻石/荷花销售人员，索要注册链接。',\r\n          closeOnClickOverlay: true,\r\n          confirmButtonText: '知道了'\r\n        })\r\n          .then(() => {\r\n            // on confirm\r\n          })\r\n          .catch(() => {\r\n            // on cancel\r\n          })\r\n      } else {\r\n        handleClickJumpBtn(router, path)\r\n      }\r\n    }\r\n    onMounted(() => {\r\n      http\r\n        .get('/hbSeller/main/role', {})\r\n        .then((res) => {\r\n          if (res.code === '200') {\r\n            if (res.data.hasMsg) {\r\n              store.commit('setHasMsg', true)\r\n            } else {\r\n              store.commit('setHasMsg', false)\r\n            }\r\n            const role = res.data.role // 1.零售户 2.店铺粉丝 3. 啥也不是\r\n            if (role == 1) {\r\n              const register = (res.data.register as boolean) || false // 当role为1时候，有这个字段，如果是true代表注册绑定手机已完成\r\n              if (register) {\r\n                router.push('/seller/sellerFans')\r\n              } else {\r\n                router.push('/seller/register')\r\n              }\r\n            } else if (role == 2) {\r\n              const needComplete = res.data.needComplete as boolean\r\n              store.commit('setNeedComplete', needComplete)\r\n              if (needComplete) {\r\n                sessionStorage.setItem('needComplete', '1')\r\n              } else {\r\n                sessionStorage.setItem('needComplete', '0')\r\n              }\r\n              router.push('/customer/home')\r\n            } else {\r\n              showPage.value = true\r\n            }\r\n          } else {\r\n            Toast.fail(res.msg)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    })\r\n    return {\r\n      router,\r\n      showPage,\r\n      onClickBtn\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.sign-in-containner {\r\n  height: 100vh;\r\n  padding-top: 61px;\r\n  box-sizing: border-box;\r\n  background-color: #f6f6f6;\r\n  .icon {\r\n    width: 97px;\r\n    height: 97px;\r\n    margin: 0 auto 26px;\r\n    img {\r\n      width: 97px;\r\n      height: 97px;\r\n    }\r\n  }\r\n  p.title {\r\n    height: 23px;\r\n    font-size: 16px;\r\n    line-height: 23px;\r\n    color: #303133;\r\n    text-align: center;\r\n    margin-bottom: 30px;\r\n  }\r\n  p.tips {\r\n    width: 300px;\r\n    font-size: 12px;\r\n    line-height: 18px;\r\n    color: #b1b1b1;\r\n    text-align: center;\r\n    margin: 0 auto 10px;\r\n  }\r\n  .bar {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    margin: 0 28px;\r\n    .van-button {\r\n      width: 150px;\r\n      height: 44px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","export const handleClickJumpBtn = (router, path) => {\r\n    router.push(path);\r\n};\r\n","import { defineComponent, onMounted, ref } from 'vue';\r\nimport { handleClickJumpBtn } from '@/hooks/useJumpBtn';\r\nimport { http } from '@/http';\r\nimport Dialog from \"vant/es/dialog\";\r\nimport \"vant/es/dialog/style/less\";\r\nimport Toast from \"vant/es/toast\";\r\nimport \"vant/es/toast/style/less\";\r\nimport { useRouter } from 'vue-router';\r\nimport store from '@/store';\r\nexport default defineComponent({\r\n    name: 'SignIn',\r\n    setup() {\r\n        const router = useRouter();\r\n        const showPage = ref(false);\r\n        const onClickBtn = (router, path) => {\r\n            if (path === '/seller/register') {\r\n                Dialog.confirm({\r\n                    title: '提示',\r\n                    message: '尊敬的店主，您还未注册成为平台的入驻零售户，请您联系当地的钻石/荷花销售人员，索要注册链接。',\r\n                    closeOnClickOverlay: true,\r\n                    confirmButtonText: '知道了'\r\n                })\r\n                    .then(() => {\r\n                    // on confirm\r\n                })\r\n                    .catch(() => {\r\n                    // on cancel\r\n                });\r\n            }\r\n            else {\r\n                handleClickJumpBtn(router, path);\r\n            }\r\n        };\r\n        onMounted(() => {\r\n            http\r\n                .get('/hbSeller/main/role', {})\r\n                .then((res) => {\r\n                if (res.code === '200') {\r\n                    if (res.data.hasMsg) {\r\n                        store.commit('setHasMsg', true);\r\n                    }\r\n                    else {\r\n                        store.commit('setHasMsg', false);\r\n                    }\r\n                    const role = res.data.role; // 1.零售户 2.店铺粉丝 3. 啥也不是\r\n                    if (role == 1) {\r\n                        const register = res.data.register || false; // 当role为1时候，有这个字段，如果是true代表注册绑定手机已完成\r\n                        if (register) {\r\n                            router.push('/seller/sellerFans');\r\n                        }\r\n                        else {\r\n                            router.push('/seller/register');\r\n                        }\r\n                    }\r\n                    else if (role == 2) {\r\n                        const needComplete = res.data.needComplete;\r\n                        store.commit('setNeedComplete', needComplete);\r\n                        if (needComplete) {\r\n                            sessionStorage.setItem('needComplete', '1');\r\n                        }\r\n                        else {\r\n                            sessionStorage.setItem('needComplete', '0');\r\n                        }\r\n                        router.push('/customer/home');\r\n                    }\r\n                    else {\r\n                        showPage.value = true;\r\n                    }\r\n                }\r\n                else {\r\n                    Toast.fail(res.msg);\r\n                }\r\n            })\r\n                .catch((err) => {\r\n                console.log(err);\r\n            });\r\n        });\r\n        return {\r\n            router,\r\n            showPage,\r\n            onClickBtn\r\n        };\r\n    }\r\n});\r\n","import { render } from \"./SignIn.vue?vue&type=template&id=511460fe&scoped=true\"\nimport script from \"./SignIn.vue?vue&type=script&lang=ts\"\nexport * from \"./SignIn.vue?vue&type=script&lang=ts\"\n\nimport \"./SignIn.vue?vue&type=style&index=0&id=511460fe&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-511460fe\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SignIn.vue?vue&type=style&index=0&id=511460fe&lang=less&scoped=true\""],"sourceRoot":""}